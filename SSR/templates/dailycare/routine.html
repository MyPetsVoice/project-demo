{% extends "base.html" %}

{% block title %}ÏùºÍ≥ºÍ¥ÄÎ¶¨ - Îç∞ÏùºÎ¶¨ÏºÄÏñ¥{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dailycare.css') }}">
{% endblock %}

{% block content %}
<div class="routine-container">
    <div class="routine-header">
        <div class="breadcrumb">
            <a href="{{ url_for('dailycare.index') }}">Îç∞ÏùºÎ¶¨ÏºÄÏñ¥</a>
            <i class="fas fa-chevron-right"></i>
            <span>ÏùºÍ≥ºÍ¥ÄÎ¶¨</span>
        </div>
        <h2>ÏùºÍ≥ºÍ¥ÄÎ¶¨</h2>
        <p>Î∞òÎ†§ÎèôÎ¨ºÏùò ÏùºÏÉÅ Î£®Ìã¥ÏùÑ Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî</p>
    </div>

    <!-- Î∞òÎ†§ÎèôÎ¨º ÏÑ†ÌÉù -->
    <div class="pet-selector">
        <div class="pet-tabs">
            <button class="pet-tab active" data-pet="1">
                <div class="pet-avatar">üêï</div>
                <span>Î©çÎ©çÏù¥</span>
            </button>
            <button class="pet-tab" data-pet="2">
                <div class="pet-avatar">üê±</div>
                <span>ÏïºÏòπÏù¥</span>
            </button>
        </div>
    </div>

    <!-- Ïò§ÎäòÏùò ÏùºÏ†ï -->
    <div class="today-schedule">
        <div class="schedule-header">
            <h3>Ïò§ÎäòÏùò ÏùºÏ†ï</h3>
            <div class="date-info">
                <span id="current-date">2025ÎÖÑ 1Ïõî 10Ïùº Î™©ÏöîÏùº</span>
            </div>
        </div>
        
        <div class="timeline">
            <div class="timeline-item completed">
                <div class="timeline-time">07:00</div>
                <div class="timeline-icon feeding">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="timeline-content">
                    <h4>ÏïÑÏπ® ÏãùÏÇ¨</h4>
                    <p>ÏÇ¨Î£å 150g + Î¨º</p>
                    <span class="status-badge completed">ÏôÑÎ£å</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-outline btn-sm">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>

            <div class="timeline-item completed">
                <div class="timeline-time">07:30</div>
                <div class="timeline-icon walk">
                    <i class="fas fa-walking"></i>
                </div>
                <div class="timeline-content">
                    <h4>ÏïÑÏπ® ÏÇ∞Ï±Ö</h4>
                    <p>Ïßë Ï£ºÎ≥Ä 15Î∂Ñ ÏÇ∞Ï±Ö</p>
                    <span class="status-badge completed">ÏôÑÎ£å</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-outline btn-sm">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>

            <div class="timeline-item current">
                <div class="timeline-time">12:00</div>
                <div class="timeline-icon feeding">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="timeline-content">
                    <h4>Ï†êÏã¨ ÏãùÏÇ¨</h4>
                    <p>ÏÇ¨Î£å 150g + Í∞ÑÏãù</p>
                    <span class="status-badge current">ÏßÑÌñâÏ§ë</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-primary btn-sm" onclick="markComplete(this)">
                        <i class="fas fa-check"></i> ÏôÑÎ£å
                    </button>
                </div>
            </div>

            <div class="timeline-item pending">
                <div class="timeline-time">14:00</div>
                <div class="timeline-icon play">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="timeline-content">
                    <h4>ÎÜÄÏù¥ ÏãúÍ∞Ñ</h4>
                    <p>Í≥µÎÜÄÏù¥ 30Î∂Ñ</p>
                    <span class="status-badge pending">ÏòàÏ†ï</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-outline btn-sm">
                        <i class="fas fa-clock"></i> ÏïåÎ¶ºÏÑ§Ï†ï
                    </button>
                </div>
            </div>

            <div class="timeline-item pending">
                <div class="timeline-time">18:00</div>
                <div class="timeline-icon feeding">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="timeline-content">
                    <h4>Ï†ÄÎÖÅ ÏãùÏÇ¨</h4>
                    <p>ÏÇ¨Î£å 150g + Î¨º</p>
                    <span class="status-badge pending">ÏòàÏ†ï</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-outline btn-sm">
                        <i class="fas fa-clock"></i> ÏïåÎ¶ºÏÑ§Ï†ï
                    </button>
                </div>
            </div>

            <div class="timeline-item pending">
                <div class="timeline-time">19:00</div>
                <div class="timeline-icon walk">
                    <i class="fas fa-walking"></i>
                </div>
                <div class="timeline-content">
                    <h4>Ï†ÄÎÖÅ ÏÇ∞Ï±Ö</h4>
                    <p>ÌïúÍ∞ïÍ≥µÏõê 30Î∂Ñ ÏÇ∞Ï±Ö</p>
                    <span class="status-badge pending">ÏòàÏ†ï</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-outline btn-sm">
                        <i class="fas fa-clock"></i> ÏïåÎ¶ºÏÑ§Ï†ï
                    </button>
                </div>
            </div>

            <div class="timeline-item pending">
                <div class="timeline-time">21:00</div>
                <div class="timeline-icon medicine">
                    <i class="fas fa-pills"></i>
                </div>
                <div class="timeline-content">
                    <h4>ÏòÅÏñëÏ†ú Í∏âÏó¨</h4>
                    <p>Í¥ÄÏ†à ÏòÅÏñëÏ†ú 1Ï†ï</p>
                    <span class="status-badge pending">ÏòàÏ†ï</span>
                </div>
                <div class="timeline-actions">
                    <button class="btn btn-outline btn-sm">
                        <i class="fas fa-clock"></i> ÏïåÎ¶ºÏÑ§Ï†ï
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Î£®Ìã¥ Í¥ÄÎ¶¨ -->
    <div class="routine-management">
        <div class="section-header">
            <h3>Î£®Ìã¥ Í¥ÄÎ¶¨</h3>
            <button class="btn btn-primary" onclick="createRoutine()">
                <i class="fas fa-plus"></i> ÏÉà Î£®Ìã¥ ÎßåÎì§Í∏∞
            </button>
        </div>

        <div class="routine-tabs">
            <button class="routine-tab active" data-type="feeding">
                <i class="fas fa-utensils"></i>
                ÏãùÏÇ¨
            </button>
            <button class="routine-tab" data-type="walk">
                <i class="fas fa-walking"></i>
                ÏÇ∞Ï±Ö
            </button>
            <button class="routine-tab" data-type="play">
                <i class="fas fa-gamepad"></i>
                ÎÜÄÏù¥
            </button>
            <button class="routine-tab" data-type="medicine">
                <i class="fas fa-pills"></i>
                ÏïΩ/ÏòÅÏñëÏ†ú
            </button>
            <button class="routine-tab" data-type="grooming">
                <i class="fas fa-cut"></i>
                ÎØ∏Ïö©
            </button>
        </div>

        <div class="routine-content">
            <div class="routine-list active" data-type="feeding">
                <div class="routine-item">
                    <div class="routine-info">
                        <h4>ÏïÑÏπ® ÏãùÏÇ¨</h4>
                        <p>Îß§Ïùº Ïò§Ï†Ñ 7Ïãú</p>
                        <div class="routine-details">
                            <span>ÏÇ¨Î£å 150g</span>
                            <span>Î¨º Ï∂©Î∂ÑÌûà</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(1)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(1)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>

                <div class="routine-item">
                    <div class="routine-info">
                        <h4>Ï†êÏã¨ ÏãùÏÇ¨</h4>
                        <p>Îß§Ïùº Ïò§ÌõÑ 12Ïãú</p>
                        <div class="routine-details">
                            <span>ÏÇ¨Î£å 150g</span>
                            <span>Í∞ÑÏãù Ï°∞Í∏à</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(2)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(2)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>

                <div class="routine-item">
                    <div class="routine-info">
                        <h4>Ï†ÄÎÖÅ ÏãùÏÇ¨</h4>
                        <p>Îß§Ïùº Ïò§ÌõÑ 6Ïãú</p>
                        <div class="routine-details">
                            <span>ÏÇ¨Î£å 150g</span>
                            <span>Î¨º Ï∂©Î∂ÑÌûà</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(3)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(3)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="routine-list" data-type="walk">
                <div class="routine-item">
                    <div class="routine-info">
                        <h4>ÏïÑÏπ® ÏÇ∞Ï±Ö</h4>
                        <p>Îß§Ïùº Ïò§Ï†Ñ 7Ïãú 30Î∂Ñ</p>
                        <div class="routine-details">
                            <span>Ïßë Ï£ºÎ≥Ä</span>
                            <span>15Î∂Ñ</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(4)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(4)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>

                <div class="routine-item">
                    <div class="routine-info">
                        <h4>Ï†ÄÎÖÅ ÏÇ∞Ï±Ö</h4>
                        <p>Îß§Ïùº Ïò§ÌõÑ 7Ïãú</p>
                        <div class="routine-details">
                            <span>ÌïúÍ∞ïÍ≥µÏõê</span>
                            <span>30Î∂Ñ</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(5)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(5)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="routine-list" data-type="play">
                <div class="routine-item">
                    <div class="routine-info">
                        <h4>Ïò§ÌõÑ ÎÜÄÏù¥</h4>
                        <p>Îß§Ïùº Ïò§ÌõÑ 2Ïãú</p>
                        <div class="routine-details">
                            <span>Í≥µÎÜÄÏù¥</span>
                            <span>30Î∂Ñ</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(6)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(6)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="routine-list" data-type="medicine">
                <div class="routine-item">
                    <div class="routine-info">
                        <h4>Í¥ÄÏ†à ÏòÅÏñëÏ†ú</h4>
                        <p>Îß§Ïùº Ïò§ÌõÑ 9Ïãú</p>
                        <div class="routine-details">
                            <span>1Ï†ï</span>
                            <span>ÏãùÌõÑ Î≥µÏö©</span>
                        </div>
                    </div>
                    <div class="routine-status">
                        <div class="status-indicator active"></div>
                        <span>ÌôúÏÑ±Ìôî</span>
                    </div>
                    <div class="routine-actions">
                        <button class="btn btn-outline btn-sm" onclick="editRoutine(7)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="toggleRoutine(7)">
                            <i class="fas fa-power-off"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="routine-list" data-type="grooming">
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-cut"></i>
                    </div>
                    <h4>Îì±Î°ùÎêú ÎØ∏Ïö© Î£®Ìã¥Ïù¥ ÏóÜÏñ¥Ïöî</h4>
                    <p>Ï†ïÍ∏∞ ÎØ∏Ïö© Î£®Ìã¥ÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî</p>
                    <button class="btn btn-primary" onclick="createRoutine('grooming')">
                        ÎØ∏Ïö© Î£®Ìã¥ Ï∂îÍ∞Ä
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ï£ºÍ∞Ñ ÌÜµÍ≥Ñ -->
    <div class="weekly-stats">
        <h3>Ïù¥Î≤à Ï£º Î£®Ìã¥ Îã¨ÏÑ±Î•†</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-icon feeding">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="stat-info">
                    <h4>ÏãùÏÇ¨</h4>
                    <div class="stat-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 95%"></div>
                        </div>
                        <span class="progress-text">95%</span>
                    </div>
                    <p>20/21Ìöå ÏôÑÎ£å</p>
                </div>
            </div>

            <div class="stat-item">
                <div class="stat-icon walk">
                    <i class="fas fa-walking"></i>
                </div>
                <div class="stat-info">
                    <h4>ÏÇ∞Ï±Ö</h4>
                    <div class="stat-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 86%"></div>
                        </div>
                        <span class="progress-text">86%</span>
                    </div>
                    <p>12/14Ìöå ÏôÑÎ£å</p>
                </div>
            </div>

            <div class="stat-item">
                <div class="stat-icon play">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="stat-info">
                    <h4>ÎÜÄÏù¥</h4>
                    <div class="stat-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 71%"></div>
                        </div>
                        <span class="progress-text">71%</span>
                    </div>
                    <p>5/7Ìöå ÏôÑÎ£å</p>
                </div>
            </div>

            <div class="stat-item">
                <div class="stat-icon medicine">
                    <i class="fas fa-pills"></i>
                </div>
                <div class="stat-info">
                    <h4>ÏïΩ/ÏòÅÏñëÏ†ú</h4>
                    <div class="stat-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                        <span class="progress-text">100%</span>
                    </div>
                    <p>7/7Ìöå ÏôÑÎ£å</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Î£®Ìã¥ ÏÉùÏÑ±/Ìé∏Ïßë Î™®Îã¨ -->
<div class="modal" id="routine-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="routine-modal-title">ÏÉà Î£®Ìã¥ ÎßåÎì§Í∏∞</h3>
            <button class="modal-close" onclick="closeRoutineModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="routine-form">
                <div class="form-group">
                    <label>Î£®Ìã¥ Ï¢ÖÎ•ò</label>
                    <select name="type" required>
                        <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                        <option value="feeding">ÏãùÏÇ¨</option>
                        <option value="walk">ÏÇ∞Ï±Ö</option>
                        <option value="play">ÎÜÄÏù¥</option>
                        <option value="medicine">ÏïΩ/ÏòÅÏñëÏ†ú</option>
                        <option value="grooming">ÎØ∏Ïö©</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Î£®Ìã¥ Ïù¥Î¶Ñ</label>
                    <input type="text" name="name" required placeholder="Ïòà: ÏïÑÏπ® ÏãùÏÇ¨">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ÏãúÍ∞Ñ</label>
                        <input type="time" name="time" required>
                    </div>
                    <div class="form-group">
                        <label>Î∞òÎ≥µ</label>
                        <select name="repeat">
                            <option value="daily">Îß§Ïùº</option>
                            <option value="weekdays">Ï£ºÏ§ë</option>
                            <option value="weekends">Ï£ºÎßê</option>
                            <option value="custom">ÏÇ¨Ïö©Ïûê ÏßÄÏ†ï</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>ÏÉÅÏÑ∏ ÏÑ§Î™Ö</label>
                    <textarea name="description" placeholder="Î£®Ìã¥Ïóê ÎåÄÌïú ÏÉÅÏÑ∏ ÏÑ§Î™Ö" rows="3"></textarea>
                </div>

                <div class="form-group checkbox-group">
                    <label class="checkbox-wrapper">
                        <input type="checkbox" name="notification" value="1" checked>
                        <span class="checkmark"></span>
                        ÏïåÎ¶º ÏÑ§Ï†ï
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeRoutineModal()">
                        Ï∑®ÏÜå
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Ï†ÄÏû•ÌïòÍ∏∞
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dailycare.js') }}"></script>
<script>
// ÌòÑÏû¨ ÎÇ†Ïßú ÏÑ§Ï†ï
document.getElementById('current-date').textContent = new Date().toLocaleDateString('ko-KR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    weekday: 'long'
});

// Î∞òÎ†§ÎèôÎ¨º ÌÉ≠ Ï†ÑÌôò
document.querySelectorAll('.pet-tab').forEach(tab => {
    tab.addEventListener('click', function() {
        document.querySelectorAll('.pet-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        const petId = this.dataset.pet;
        loadPetRoutine(petId);
    });
});

// Î£®Ìã¥ ÌÉ≠ Ï†ÑÌôò
document.querySelectorAll('.routine-tab').forEach(tab => {
    tab.addEventListener('click', function() {
        document.querySelectorAll('.routine-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        document.querySelectorAll('.routine-list').forEach(list => list.classList.remove('active'));
        const targetType = this.dataset.type;
        document.querySelector(`.routine-list[data-type="${targetType}"]`).classList.add('active');
    });
});

// ÏùºÏ†ï ÏôÑÎ£å Ï≤òÎ¶¨
function markComplete(button) {
    const timelineItem = button.closest('.timeline-item');
    timelineItem.classList.remove('current');
    timelineItem.classList.add('completed');
    
    const statusBadge = timelineItem.querySelector('.status-badge');
    statusBadge.textContent = 'ÏôÑÎ£å';
    statusBadge.className = 'status-badge completed';
    
    button.outerHTML = '<button class="btn btn-outline btn-sm"><i class="fas fa-edit"></i></button>';
    
    // TODO: Ïã§Ï†ú ÏôÑÎ£å Ï≤òÎ¶¨ API Ìò∏Ï∂ú
    alert('ÏùºÏ†ïÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
}

// Î£®Ìã¥ Î™®Îã¨ Í¥ÄÎ¶¨
function createRoutine(type = '') {
    document.getElementById('routine-modal-title').textContent = 'ÏÉà Î£®Ìã¥ ÎßåÎì§Í∏∞';
    document.getElementById('routine-form').reset();
    
    if (type) {
        document.querySelector('select[name="type"]').value = type;
    }
    
    document.getElementById('routine-modal').classList.add('active');
}

function editRoutine(routineId) {
    document.getElementById('routine-modal-title').textContent = 'Î£®Ìã¥ Ìé∏Ïßë';
    // TODO: Í∏∞Ï°¥ Î£®Ìã¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
    document.getElementById('routine-modal').classList.add('active');
}

function closeRoutineModal() {
    document.getElementById('routine-modal').classList.remove('active');
    document.getElementById('routine-form').reset();
}

// Î£®Ìã¥ ÌôúÏÑ±Ìôî/ÎπÑÌôúÏÑ±Ìôî
function toggleRoutine(routineId) {
    // TODO: Î£®Ìã¥ ÌôúÏÑ±Ìôî/ÎπÑÌôúÏÑ±Ìôî API Ìò∏Ï∂ú
    alert(`Î£®Ìã¥ ${routineId} ÏÉÅÌÉúÎ•º Î≥ÄÍ≤ΩÌï©ÎãàÎã§.`);
}

// Î£®Ìã¥ Ìèº Ï†úÏ∂ú
document.getElementById('routine-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    
    try {
        // TODO: Ïã§Ï†ú API Ìò∏Ï∂ú
        alert('Î£®Ìã¥Ïù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!');
        closeRoutineModal();
        // ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®
        location.reload();
    } catch (error) {
        alert('Î£®Ìã¥ Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
    }
});

// Î∞òÎ†§ÎèôÎ¨º Î£®Ìã¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
function loadPetRoutine(petId) {
    // TODO: ÏÑ†ÌÉùÎêú Î∞òÎ†§ÎèôÎ¨ºÏùò Î£®Ìã¥ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
    console.log('Î°úÎìúÌï† Î∞òÎ†§ÎèôÎ¨º ID:', petId);
}

// Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
document.getElementById('routine-modal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeRoutineModal();
    }
});

// ÌòÑÏû¨ ÏãúÍ∞ÑÏóê Îî∞Î•∏ ÌÉÄÏûÑÎùºÏù∏ ÏóÖÎç∞Ïù¥Ìä∏
function updateTimeline() {
    const now = new Date();
    const currentTime = now.getHours() * 60 + now.getMinutes();
    
    document.querySelectorAll('.timeline-item').forEach(item => {
        const timeText = item.querySelector('.timeline-time').textContent;
        const [hours, minutes] = timeText.split(':').map(Number);
        const itemTime = hours * 60 + minutes;
        
        if (itemTime <= currentTime && !item.classList.contains('completed')) {
            item.classList.add('current');
            item.classList.remove('pending');
        }
    });
}

// ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÌÉÄÏûÑÎùºÏù∏ ÏóÖÎç∞Ïù¥Ìä∏
document.addEventListener('DOMContentLoaded', function() {
    updateTimeline();
});

// 5Î∂ÑÎßàÎã§ ÌÉÄÏûÑÎùºÏù∏ ÏóÖÎç∞Ïù¥Ìä∏
setInterval(updateTimeline, 5 * 60 * 1000);
</script>
{% endblock %}